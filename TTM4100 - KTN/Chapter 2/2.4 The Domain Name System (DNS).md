>[!Question]
>How to map between IP address and name, and vice versa ?


DNS is a distributed database implemented in hierarchy of many name servers.

Application-layer-protocol: hosts, DNS servers communicate to resolve names(address/name translation)
- Note: core internet function, implemented as application-layer protocol.
- Complexity at networks "edge"


#### Service, structure
DNS SERVICE:
- Hostname-to-IP-address translation
- host aliasing:
	- canonical, alias names
- Mail server aliasing
- load distribution
	- replicated web servers: many IP address correspond to one name.

#### Why not centralize DNS? -> doesnt scale!
- Single point of failure
- traffic volume
- distant centralized database
- maintenance

#### DNS is a large database!
- Billion records, each simple
- handles many trillions queries/day
	- Many more reads than writes
	- almost every internet transaction interacts with DNS.
- millions of different orgs are responsible for their records.

#### DNS: a distributed, hierarchical database.
ROOT -> Top Level Domains - > Authorative

![[Pasted image 20250310105217.png]]

#### Root name servers:
- Official, contact-of-last-resort by name servers that can not resolve name.
- very important function!
	- no internet without (sentralnervesystemet)
		- DNSSEC - provides security (authentiaction)
	- ICANN (Internet coporation for assigned names and numbers) manages root DNS domain
- 13 logical root name servers worldwide, each server replicated many times. (around 1000)

#### Top-level-domain (TLD) servers
- responsible for .com .org .net .edu .aero .jobs .museum and all country domains


#### Authorative DNS servers:
- Organizations own DNS servers, providing authorative hostname to IP mappings for organizations named hosts.
- Can be maintained by organizations or service provider.

#### Local DNS name servers
- When host makes DNS query, it is sent to its local DNS server
	- Local DNS server returns reply, answering:
		- from its local cache of recent name-to-address translation pairs (maybe out of date)
		- forwarding request into DNS hierarchy for resolution


#### DNS name resolution: iterated query
 
![[Pasted image 20250310110341.png]]

4 queries and 4 responses!

#### DNS name resolution: recursive query
![[Pasted image 20250310110502.png]]


#### Caching DNS information
- Once (any) name server learns mapping, it caches mapping, and immediately returns a cached mapping in response to a query.
	- Improves response time
	- entries will timeout after some time (TTL)
	- tld servers typically cached in local name servers
- cached entries may be out of date
	- if named host changes ip address, may not be known internet-wide until all TTLs expire!

#### DNS records
RR format: (name, value, type, ttl)

type=A
- name is hostname
- value is IP address

type=NS
- name is domain
- value is hostname of authoritative name server for this domain.

type=CNAME
- name is alias name for som canonical (the real) name
- www.ibn.com is really servereast.backup2.ibm.com
- value is canonical name.

type=MX
- value is name of SMTP mail server associated with name

#### DNS protocol messages
- DNS query and reply messages, both have same format:
- ![[Pasted image 20250310111133.png]]